Neural Network Tools for STM32 v1.2.0 (AI tools v5.0.0)
Created date       : 2020-04-18 17:08:57

Exec/report summary (validate dur=201.803s err=0)
------------------------------------------------------------------------------------------------------------------------
model file         : C:\Users\grgcz\Desktop\dev_space_win\AOS_Project\AOS_MovementRecognition\neural_net-py\best_models\best_acc_model_RNN_fold1_09-04-2020_221243.h5
type               : keras (keras_dump)
c_name             : network
compression        : None
quantize           : None
L2r error          : 2.88233859e-09 (expected to be < 0.01)
workspace dir      : C:\Users\grgcz\Desktop\dev_space_win\AOS_Project\AOS_MovementRecognition\stm32ai_ws
output dir         : C:\Users\grgcz\Desktop\dev_space_win\AOS_Project\AOS_MovementRecognition\stm32ai_output
vinput files       : C:\Users\grgcz\Desktop\dev_space_win\AOS_Project\AOS_MovementRecognition\neural_net-py\test_csv\test_Apr09_20\test_input_fold-1_Apr09_22-09-51.csv
voutput files      : C:\Users\grgcz\Desktop\dev_space_win\AOS_Project\AOS_MovementRecognition\neural_net-py\test_csv\test_Apr09_20\test_output_fold-1_Apr09_22-09-51.csv

model_name         : best_acc_model_RNN_fold1_09042020_221243
model_hash         : fc8f821a7f3a5c7c278e772d8331cb75
input              : input_0 [360 items, 1.41 KiB, ai_float, FLOAT32, (30, 1, 12)]
input (total)      : 1.41 KiB
output             : FCN3_nl [7 items, 28 B, ai_float, FLOAT32, (7,)]
output (total)     : 28 B
params #           : 23,103 items (90.25 KiB)
macc               : 597,465
weights (ro)       : 93,180 (91.00 KiB) (0.83%) 
activations (rw)   : 1,696 (1.66 KiB) 
ram (total)        : 3,164 (3.09 KiB) = 1,696 + 1,440 + 28

------------------------------------------------------------------------------------------------------------------------
id  layer (type)                      output shape      param #     connected to             macc           rom                
------------------------------------------------------------------------------------------------------------------------
0   input_0 (Input)                   (30, 1, 12)                                                                              
    batch_normalization_1 (ScaleBias) (30, 1, 12)       24          input_0                  720            96                 
------------------------------------------------------------------------------------------------------------------------
1   LSTM1 (LSTM)                      (1, 1, 64)        19,712      batch_normalization_1    593,280        79,616             
------------------------------------------------------------------------------------------------------------------------
3   FCN1 (Dense)                      (1, 1, 32)        2,080       LSTM1                    2,048          8,320              
    FCN1_nl (Nonlinearity)            (1, 1, 32)                    FCN1                     32                                
------------------------------------------------------------------------------------------------------------------------
5   FCN2 (Dense)                      (1, 1, 32)        1,056       FCN1_nl                  1,024          4,224              
    FCN2_nl (Nonlinearity)            (1, 1, 32)                    FCN2                     32                                
------------------------------------------------------------------------------------------------------------------------
7   FCN3 (Dense)                      (1, 1, 7)         231         FCN2_nl                  224            924                
    FCN3_nl (Nonlinearity)            (1, 1, 7)                     FCN3                     105                               
------------------------------------------------------------------------------------------------------------------------
best_acc_model_RNN_fold1_09042020_221243 p=23103(90.25 KBytes) macc=597465 rom=91.00 KBytes (0.83%) ram=1.66 KiB io_ram=1.43 KiB

 
Complexity/l2r error per-layer - macc=597,465 rom=93,180
------------------------------------------------------------------------------------------------------------------------
id  layer (type)                      macc                          rom                           l2r error                    
------------------------------------------------------------------------------------------------------------------------
0   batch_normalization_1 (ScaleBias) |                       0.1%  |                       0.1%                               
1   LSTM1 (LSTM)                      |||||||||||||||||||||  99.3%  |||||||||||||||||||||  85.4%                               
3   FCN1 (Dense)                      |                       0.3%  |||                     8.9%                               
3   FCN1_nl (Nonlinearity)            |                       0.0%  |                       0.0%                               
5   FCN2 (Dense)                      |                       0.2%  ||                      4.5%                               
5   FCN2_nl (Nonlinearity)            |                       0.0%  |                       0.0%                               
7   FCN3 (Dense)                      |                       0.0%  |                       1.0%                               
7   FCN3_nl (Nonlinearity)            |                       0.0%  |                       0.0%  2.88233859e-09 *             
------------------------------------------------------------------------------------------------------------------------


ON-DEVICE STM32 execution ("network", COM13, 115200)..

<Stm32com id=0x255787e37f0 - CONNECTED(COM13/115200) devid=0x433/STM32F401xD/E msg=2.1>
 0x433/STM32F401xD/E @84MHz/84MHz (FPU is present) lat=2 ART: PRFTen ICen DCen
 found network(s): ['network']
 description    : 'network' 1->[8]->1 macc=597465 rom=91.00KiB ram=1.66KiB
 tools versions : rt=(4, 1, 0) tool=(5, 0, 0)/(1, 3, 0) api=(1, 1, 0) "Sat Apr 18 17:04:59 2020"

Results for 516 inference(s) @84/84MHz (macc:597465)
 device      : 0x433/STM32F401xD/E @84MHz/84MHz (FPU is present) lat=2 ART: PRFTen ICen DCen
 duration    : 83.083 ms (average)
 CPU cycles  : 6978971 (average)
 cycles/MACC : 11.68 (average for all layers)
 c_nodes     : 8

Clayer  id  desc                          oshape          fmt       ms        
--------------------------------------------------------------------------------
0       0   10002/(Batch normalization)   (30, 1, 12)     float32   0.065     
1       1   10008/(Long Short Time Memory)(1, 1, 64)      float32   82.654    
2       3   10005/(Dense)                 (1, 1, 32)      float32   0.190     
3       3   10009/(Nonlinearity)          (1, 1, 32)      float32   0.010     
4       5   10005/(Dense)                 (1, 1, 32)      float32   0.105     
5       5   10009/(Nonlinearity)          (1, 1, 32)      float32   0.010     
6       7   10005/(Dense)                 (1, 1, 7)       float32   0.028     
7       7   10009/(Nonlinearity)          (1, 1, 7)       float32   0.021     
                                                                    83.083 (total)


Accuracy report #1 for the generated stm32 C-model
----------------------------------------------------------------------------------------------------
NOTE: Computed against the provided ground truth values

acc=100.00%, rmse=0.0043, mae=0.0004

7 classes (516 samples)
-------------------------------------------
C0        73    .    .    .    .    .    .  
C1         .   87    .    .    .    .    .  
C2         .    .   13    .    .    .    .  
C3         .    .    .   92    .    .    .  
C4         .    .    .    .   97    .    .  
C5         .    .    .    .    .   82    .  
C6         .    .    .    .    .    .   72  

Accuracy report #1 for the reference model
----------------------------------------------------------------------------------------------------
NOTE: Computed against the provided ground truth values

acc=100.00%, rmse=0.0043, mae=0.0004

7 classes (516 samples)
-------------------------------------------
C0        73    .    .    .    .    .    .  
C1         .   87    .    .    .    .    .  
C2         .    .   13    .    .    .    .  
C3         .    .    .   92    .    .    .  
C4         .    .    .    .   97    .    .  
C5         .    .    .    .    .   82    .  
C6         .    .    .    .    .    .   72  

Cross accuracy report #1 (reference vs C-model)
----------------------------------------------------------------------------------------------------
NOTE: the output of the reference model is used as ground truth value

acc=100.00%, rmse=0.0000, mae=0.0000

7 classes (516 samples)
-------------------------------------------
C0        73    .    .    .    .    .    .  
C1         .   87    .    .    .    .    .  
C2         .    .   13    .    .    .    .  
C3         .    .    .   92    .    .    .  
C4         .    .    .    .   97    .    .  
C5         .    .    .    .    .   82    .  
C6         .    .    .    .    .    .   72  


Evaluation report (summary)
--------------------------------------------------
Mode                   acc       rmse      mae      
--------------------------------------------------
stm32 C-model #1       100.0%    0.004269  0.000425 
original model #1      100.0%    0.004269  0.000425 
X-cross #1             100.0%    0.000000  0.000000 

L2r error : 2.88233859e-09 (expected to be < 0.01)
